<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{my_profile :: meta}"></th:block>
    <title>Пользователи</title>
    <th:block th:replace="~{my_profile :: style}"></th:block>
</head>
<body>

<h1>Фото</h1>

<th:block th:replace="~{my_profile :: header}"></th:block>

<script>

    fetch(`http://localhost:8765/users/all`, requestOptions)
        .then(response => {
            if (response.ok) {
                return response.json();
            }
            throw new Error('Network response was not ok.');
        })
        .then(data => {
            let body = document.querySelector('body');
            let table = document.createElement('table');

            let key,
                tr,
                td;

            tr = document.createElement('tr');

            td = document.createElement('td');
            td.textContent = 'id';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'login';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'email';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'firstName';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'lastName';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'birthdate';
            tr.appendChild(td);

            td = document.createElement('td');
            td.textContent = 'role';
            tr.appendChild(td);

            table.appendChild(tr);
            body.appendChild(table);

            for (key in data) {
                tr = document.createElement('tr');

                td = document.createElement('td');
                td.textContent = data[key].id;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].login;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].email;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].firstName;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].lastName;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].birthdate;
                tr.appendChild(td);

                td = document.createElement('td');
                td.textContent = data[key].role;
                tr.appendChild(td);

                table.appendChild(tr);
            }
        })
        .catch(error => {
            console.error('Произошла ошибка', error);
        });

</script>

</body>
</html>